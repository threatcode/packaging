#!/bin/sh
#
# After running, may wish to execute:
#   - setup-team-repo (to pull any new repos)
#   - archive-team-repo (to remove any old repos)
#

export LC_ALL=C

## https://gitlab.com/kalilinux/packages
projects=$( salsa --conf-file /dev/null --api-url https://gitlab.com/api/v4/ --group-id 5034987 ls | awk '/Name:/ { print $2 }' | sort )

cat <<EOF>mrconfig
[DEFAULT]
jobs = 4
# Ignore svn/cvs metadata
svn_test = false
cvs_test = false
EOF

for project in ${projects}; do
  cat <<EOF>>mrconfig

[$project]
checkout = gbp clone --debian-branch=kali/master git@gitlab.com:kalilinux/packages/${project}.git
EOF
done
